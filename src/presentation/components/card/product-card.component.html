<div class="bg-white shadow-sm rounded overflow-hidden card-product" (click)="onDetail(product)">
  <img class="w-full h-48 object-cover" [src]="product.thumbnail" [alt]="product.title">

  <div class="p-4">
    <h2 class="text-xl font-semibold mb-2">{{ product.title }}</h2>
    <p class="text-gray-700 mb-2">{{ product.description }}</p>

    <p class="text-blue-600 font-bold mb-2">
      Precio: ${{ product.price }}
      <span class="text-red-600">(-{{ product.discountPercentage }}%)</span>
    </p>

    <p
      class="font-bold mb-4"
      [ngClass]="{
        'text-yellow-500': product.stock >= 10,
        'text-red-600': product.stock < 10
      }"
    >
      Stock: {{ product.stock }}
    </p>

    <button
      class="bg-blue-600 hover:bg-blue-700 text-white w-full py-2 rounded mb-3"
      (click)="onClickBuy()"
    >
      Agregar al carrito
    </button>

    <button
      class="bg-gray-800 hover:bg-gray-900 text-white w-full py-2 rounded mb-3"
      (click)="onUpdate(product)"
    >
      Editar producto
    </button>

    <button
      class="bg-red-600 hover:bg-red-700 text-white w-full py-2 rounded mb-4"
      (click)="onDelete(product)"
    >
      Eliminar producto
    </button>

    <div *ngIf="(product$ | async) as product" class="flex items-center justify-between">
      <button (click)="decreaseCount()" class="bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded">
        -
      </button>
      <p class="font-medium text-lg">{{ product.count || 0 }}</p>
      <button (click)="increaseCount()" class="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded">
        +
      </button>
    </div>
  </div>
</div>
